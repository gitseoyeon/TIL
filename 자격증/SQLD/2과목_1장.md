### 1. 관계형 DB 개요

- DB : 데이터를 일정한 형태로 저장해 놓은 것. DBMS를 이용해서 효율적인 데이터 관리와 데이터 손상 복구 가능.
    - 종류
        - 계층형 DB : 트리 형태의 자료구조에 데이터저장, 1:N 관계 표현
        - 네트워크형 DB : 오너와 멤버형태로 데이터 저장, M:N 관계 표현
        - **관계형 DB**: 릴레이션에 데이터 저장, 집합 연산과 관계 연산 가능
- 관계형 DB
    - 정규화를 통해 이상현상 및 중복데이터 제거
    - 동시성  관리와 병행 제어를 통해 데이터 동시 조작 가능
        - 집합연산
            - 합집합
            - 차집합
            - 교집합
            - 곱집합 : 각 릴레이션에 존재하는 모든 데이터를 조합
        - 관계 연산
            - 선택 연산 : 조건에 맞는 행(튜플) 조회
            - 투영 연산 : 조건에 맞는 칼럼(속성) 조회
            - 결합 연산 : 공통 속성을 사용하여 새로운 릴레이션 생성
            - 나누기 연산 : 공통요소를 추출하고 분모 릴레이션의 속성을 삭제한 후 중복된 행 제거
- SQL: RDB에서 사용하는 언어. 데이터 조회 및 신
    - 종류
        - **DML** : 데이터 조작어
            - SELECT
            - INSERT, UPDATE, DELETE
        - **DDL** : 데이터 정의어
            - CREATE, ALTER, DROP
        - **DCL** : 데이터 제어어
            - GRANT, REVOKE
        - **TCL** : 트랜잭션 제어어
            - COMMIT, ROLLBACKD
    - 테이블 : RDB 의 기본 단위, 데이터를 저장하는 객체, 칼럼과 행의 2차원 구조

### 2. DDL

- 데이터 타입
    - CHAR : 고정 길이 문자열, 할당된 변수 값의 길이가 L 이하일때 차이는 공백으로 채워짐
    - VARCHAR : 가변 길이 문자열, 할당되는 변수 값의 길이의 최대값이 L 임. 문자열은 가능한 최대 길이로 설정
    - NUMBER : 숫자형
    - DATE, DATETIME : 날짜형, 데이터 크기 지정이 필요하지 않음
- **CREATE TABLE**
    - 테이블 및 칼럼 명명 규칙
        - 알파벳, 숫자, _(언더바), $, # 사용
        - 대소문자 구별하지 않음
        - 테이블명은 단수형 권고
    - 제약조건 : 데이터 무결성 유지가 목적, 복제 테이블에는 기존 테이블 제약 조건중 NOT NULL 만 적용
        - PRIMARY KEY
            - 테이블당 하나의 기본키만 정의 가능
            - 기본키 생성시 DBMS가 자동으로 인덱스를 생성함. NULL 불가
        - FOREIGN KEY
            - 다른 테이블의 기본키를 외래키로 지정
            - 참조 무결성 제약조건
            - SQL
                - **ALTER TABLE** 테이블명 **ADD CONSTRAINT** 칼럼명 **FOREIGN KEY** (칼럼명) **REFERENCES** 테이블명 (칼럼명)
        - UNIQUE KEY
            - 행 데이터를 식별하기 위해 생성
            - NULL 가능
        - NOT NULL
        - CHECK
            - 입력 값의 종류 및 범위 제한
    - DESCRIBE 테이블명, sp_help ‘dbo.테이블명’ : 테이블 구조 확인
- **ALTER TABLE** : 테이블의 칼럼 관련 변경 명령어
    - 칼럼 추가
        - SQL
            - ALTER TABLE 테이블명 ADD (컬러명 데이터 타입);
        - 마지막으로 칼럼 추가 됨
    - 칼럼 삭제
        - SQL
            - ALTER TABLE 테이블명 DROP COLUMN 칼럼명;
        - 삭제후 복구 불가
    - 칼럼 설정 변경
        - SQL
            - ALTER TABLE 테이블명 MODIFY (칼럼명 데이터 타입 제약조건);
        - NULL 만 있거나 행이 어뵷는 경우에만 칼럼의 크기 축소 가능
        - NULL 만 있을 때는 데이터 유형도 변경 가능
        - NULL 이 없으면 NOT NULL 제약조건 추가 가능
        - 기본값 변경 작업 이후 발생하는 데이터에 대해서만 기본 값이 변경됨
    - 칼럼명 변경
        - ANSI / ISO 표준에 명시된 기능 아님
    - 제약 조건 추가
        - SQL
            - ALTER TABLE 테이블명 ADD CONSTRAINT 제약 조건;
    - 제약 조건 제거
        - SQL
            - ALTER TABLE 테이블명 DROP CONSTRAINT 제약 조건;
- **RENAME TABLE**
    - ALTER TABLE 테이블명 RENAME TO 테이블명 으로도 가능함
- **DROP TABLE**
    - SQL
        - DROP TABLE 테이블명;
    - 테이블의 데이터와 구조 삭제, 복구 불가
    - CASCADE CONSTRAINT 옵션으로 관련 테이블의 참조 제약 조건도 삭제하여 참조 무결성을 준수 할 수 있음
- **TRUNCATE TABLE**
    - 테이블의 전체 데이터 삭제
    - 로그를 기록하지 않기 때문에 ROLLBACK 불가

### DML

- INSERT : 데이터 입력
    - SQL
        - INSERT INTO 테이블명 (칼럼명, …) VALUES (필드값, ….);
        - INSERT INTO 테이블명 VALUES (필드값, …);
- UPDATE : 데이터 수정
    - SQL
        - UPDATE 테이블명 SET 칼럼명 = 필드값;
- DELETE : 데이터 삭제
    - SQL
        - DELETE FROM 테이블명 WHERE 조건절;
        - DELETE FROM 테이블명;
    - DELETE로 데이터를 삭제해도 테이블 용량은 초기화 되지 않음
- SELECT
    - 칼럼 별 데이터 선택
        - SQL
            - SELECT 칼럼명 FROM 테이블명;
    - 데이터 중복 없이 선택
        - SQL
            - SELECT DISTINCT 칼럼명 FROM 테이블명;
    - 전체 칼럼의 데이터 선택
        - SQL
            - SELECT * FROM 테이블명;
- 문자열의 합성 연산자
    - +, CONCAT 함수로도 2개 문자열 합성 가능
    - 칼럼명이 중복될 경우 SELECT 절에서 앨리어스 필수
- DUAL
    - Oracle의 기본 더미 테이블
    - 연산 수행을 위해 사용됨

### TCL

- 트랜젝션 : DB의 논리적 연산 단위, 하나 이상의 SQL 문을 포함함
    - 특성 ACID
        - 원자성 : 전부 실행되거나 전혀 실행되지 않음
        - 일관성 : 트랜잭션으로 인한 DB 상태의 모순이 없음
        - 고립성 : 부분적인 실행 결과에 다른 트랜잭션이 접근할 수 없음. LOCKING으로 고립성 보장
        - 영속성 : 트랜잭션의 결과는 영구적으로 저장됨
## 1과목 - 2장 [ 데이터 모델과 성능 ]

### ■ 성능데이터모델링

- 데이터베이스 성능 향상 목적으로 설계 단계의 데이터 모델링 때부터 성능과 관련된 사항이 데이터 모델링에 반영될 수 있도록 하는 것
- 데이터의 증가가 빠를수록 성능저하에 따른 성능 개선 비용은 증가함
- 데이터모델은 성능을 튜닝하면서 변경이 될 수 있는 특징이 있음
- **분석/설계 단계에서 성능을 고려한 데이터모델링을 수행할 경우** 성능 저하에 따른 Rework 비용을 최소화 할 수 있는 기회를 가지게 됨

### ■ 데이터 모델링의 순서

1. 데이터모델링을 할 때 정규화를 정확하게 수행함
2. 데이터베이스 용량산정을 수행함
3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악
4. 용량과 트랜잭션의 유형에 따라 반정규화를 수행
5. 이력모델의 조정, PK/FK 조정, 슈퍼타입/서브타입 조정 등을 수행

### ■ 성능데이터모델링을 할 때 고려사항

- 용량산정은 전체적인 데이터베이스에 발생되는 트랜잭션의 유형과 양을 분석하는 자료임
- 물리적인 데이터 모델링을 할 때 PK/FK의 칼럼의 순서조정, FK 인덱스 생성 등은 중요한 요소임
- 이력 데이터는 시간에 따라 반복적으로 발생이 되기 때문에 대량 데이터일 가능성이 높아 특별히 성능을 고려하여 칼럼 등을 추가하도록 설계해야함

### ■ 반정규화

- 반정규화는 **정규화된 엔터티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행**하는 데이터 모델링의 기법을 의미
- 데이터를 중복하여 성능을 향상시키기 위한 기법
- 성능을 향상시키기 위해 **정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는 모든 과정**
- 반정규화 적용 이유
    - 데이터를 조회할 때 디스크 I/O 량이 많아서 성능이 저하되거나 경로가 너무 멀어 **조인으로 인한 성능저하 예상 될 때**
    - 칼럼을 계산하여 읽을 때 성능이 저하될 것이 예상되는 경우
- 반정규화 기법
    - 테이블의 반정규화
        - 테이블 병합
            - 1:1 관계 테이블 병합
            - 1:M 관계 테이블 병합
            - 슈퍼/서브타입 테이블 병합
        - 테이블 분할
            - 수직분할
            - 수평분할
        - 테이블 추가
            - 중복테이블 추가
            - 통계테이블 추가
            - 이력테이블 추가
            - 부분테이블 추가
    - 칼럼의 반정규화
        - 중복칼럼 추가
            - 조인 감소를 위해 여러 테이블에 동일한 칼럼을 갖도록 함
        - 파생칼럼 추가
            - 조회 성능을 우수하게 하기 위해 미리 계산된 칼럼을 갖도록 함
        - 이력테이블 칼럼 추가
            - 최신값을 처리하는 이력의 특성을 고려하여 기능성 칼럼을 추가함
        - PK에 의한 칼럼 추가
        - 응용 시스템 오작동을 위한 칼럼 추가

### ■ 반정규화 대상에 대해 다른 방법으로 처리

- 뷰 사용
    - 지나치게 많은 조인이 걸려 데이터를 조회하는 작업이 기술적으로 어려울 경우
- 클러스터링/인덱스 조정
    - 대량의 데이터처리나 부분처리에 의해 성능이 저하되는 경우
- 파티셔닝 기법
    - 대량의 데이터는 Primary Key의 성격에 따라 부분적인 테이블로 분리할 수 있음
    - 논리적으로는 하나의 테이블이지만 물리적으로는 여러 개의 테이블로 분리하여 데이터 액세스 성능도 향상시키고 데이터 관리 방법도 개선할 수 있도록 테이블에 적용하는 기법

### ■ 슈퍼/서브 타입 데이터 모델의 변환 기술

- 개별적으로 발생되는 트랜잭션에 대해서는 개별 테이블로 구성
- 슈퍼 타입 + 서브 타입에 대해 발생되는 트랜잭션에 대해서는 슈퍼타입 + 서브타입 테이블로 구성
- 전체를 하나로 묶어 트랜잭션이 발생할 때는 하나의 테이블로 구성